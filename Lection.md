<h1>Логическое (датологическое) проектирование базы данных </h1>
	1. Понятие нормализации, аномалии добавления, удаления, редактирования
	2. Первая нормальна форма 1NF
	3. Вторая нормальная форма 2NF
	4. Третья нормальная форма 3NF
	5. Четвертая 4NF, пятая 5NF, нормальные формы
	6. Пример датологического проектирования
#Понятие нормализации, аномалии добавления, удаления, редактирования

После концептуального проектирования мы имеем набор сущностей, их атрибутов и некоторые весьма нечеткие представления о связях между сущностями. 

На этапе датологического проектировании мы должны превратить все сущности в соответствующие реляционные таблицы, продумать - какие атрибуты сущностей являются полями соответствующих таблиц, а какие внешними ключами других таблиц, определиться с типами хранимых данных в соответствующих полях, и самое главное, нужно разобраться, как правильно связать таблицы и в каких отношениях (один ко многим, один к одному).

Здесь возникает понятие нормализация. Она направлена на устранение избыточности хранимой информации и обеспечение ее непротиворечивого хранения. Проведение этапа нормализации базы данных обеспечивает гибкость базы данных и позволяет без особых проблем изменять структуру базы данных в будущем при необходимости. 

Если хранение данных реализовано некорректно, при обычных операциях добавления, удаления, редактирования данных могут возникнуть проблемы (аномалии).




Очевидно, при обработке таких данных возникают проблемы.
Ежегодно у сотрудников и клиентов меняется возраст и стаж. Это пример аномалии редактирования.
При добавлении нового сотрудника, необходимо понять, как заполнить "признак сотрудника". Это пример аномалии добавления.
Если сотрудник переназначен на другую должность, непонятно как сохранить историю предыдущих назначений. Это пример аномалии удаления.

Нормализация -- процесс последовательного преобразования таблиц БД к виду, принятому в реляционной модели данных.

#Первая нормальна форма 1NF

Практически любой человек, делающий первые шаги в проектировании БД, повторяет одну и ту же ошибку - собирает всю подлежащую хранению информацию в одну таблицу. Более того, очень часто допускается добавлять в одну ячейку таблицы повторяющиеся группы данных. В нашем примере, допустим, человек работает на 0,5 ставки на одной должности и 0,5 ставки на другой. Принимается решение указать должности в столбце признак сотрудника через запятую. С точки зрения теории реляционных баз данных, это ошибка.

С реляционными данными действует тот же самый закон: одна ячейка - одно значение.

Безусловно, из правил бывают и исключения. Иногда по тем или иным причинам разработчикам БД приходится идти на "преступление" и закрыть глаза на повторение групп. Такое вполне вероятно при хранении в БД массивов, включающих сотни значений. Но в подобной ситуации надо готовиться к множеству неприятностей. Как минимум разработчик столкнется с проблемами выборки данных при построении запросов. 
Использование оператора LIKE в SQL-языках не спасает. Эти операции выполняются значительно дольше.

Таким образом, возникает необходимость обеспечения атомарности в ячейка базы данных. 

Под атомарностью значения  понимается, с одной стороны, целостность, с другой неделимостью. Разделение данных на "атомы" впоследствии позволит вооружить БД дополнительным сервисом, в частности разнообразным способами сортировки данных и расширенными методами фильтрации и поиска данных.

Хороший пример:  Фамилия Имя Отчество --> Фамилия | Имя | Отчество
Плохой пример: Фамилия --> первая буква фамилии|вторая буква фамилии|…|

Если поля всех реляционных таблиц базы данных атомарны, то база данных отвечает первой нормальной форме 1NF.

#Вторая нормальна форма 2NF

Один атрибут отношения А функционально зависит от другого атрибута В, если каждому значению А однозначно соответствует значение В.

Пример: дата рождения однозначно определяет возраст.

Отображение в символьной форме: A --> B, где А - детерминанта, В - зависимая часть.

Степень функциональной зависимости может оказаться разной:
	- Частичная зависимость.
		Возникает при наличии взаимосвязи между отдельным атрибутом и группой атрибутов отношения, выполняющих роль ключа отношения. На второй ступени нормализации необходимо избавиться от частичной зависимости и добиться полной функциональной зависимости.
	- Полная зависимость
		A <--> B
	- Транзитивная зависимость
		ДА: A --> B --> C
		НЕТ: A <-- B <-- C
	- Многозначная зависимость
		
Между атрибутами входящими в состав первичного ключа, и всеми остальными невлюбчивыми атрибутами одна существовать полная функциональная зависимость.

Частичная зависимость возникнуть только в той таблице, у которой ключ составной. Поэтому стараются использовать один атрибут, id.

Таблица приведена к второй нормальной форме, если она соответствует 2NF и в ней отсутствуют частичные зависимости (многие ко многим). 

#Третья нормальна форма 3NF

Наличие транзитивной зависимости между атрибутами одного отношения можно считать достаточным условием, подтверждающим необходимость разнесения этих атрибутов по разным отношениям.

Еще один фактор, свидетельствующий о транзитивной зависимости, - возникновение связи "один ко многим" между атрибутами таблицы.

ID --> Пол  --> Семейное положение

# дописать
Таблица приведена к третьей нормальной форме, если она соответствует 2NF и в ней отсутствуют транзитивные зависимости. 

#Четвертая 4NF, пятая 5NF, нормальные формы

Реляционная модель специализируется только на связях "один к одному" (1:1) и "один ко многим" (1:M).

Для реализации связи "многие ко многим" (M:N) приходится создавать дополнительную таблицу, которая разделить связь M:N на две 1:М.



Один сотрудник может выполнять несколько заказов, и наоборот - один заказ может выполняться несколькими сотрудниками. Решение проблемы отражено на рисунке, где создана дополнительная промежуточная таблица (ассоциативное отношение), и забыли о многозначной зависимости.

Таблица приведена к четвертой нормальной форме, если она соответствует 3NF и в ней отсутствуют многозначные зависимости (многие ко многим).

Пятая нормальная форма ушла нахуй (не имеет практического применения).






